{
  "name": "Acme API to X12 855",
  "type": "only_mapped_keys",
  "mapping": "{\n  \"heading\": {\n    \"transaction_set_header_ST\": { \"transaction_set_identifier_code_01\": \"855\", \"transaction_set_control_number_02\": $$.controlNumber },\n    \"beginning_segment_for_purchase_order_acknowledgment_BAK\": {\n      \"transaction_set_purpose_code_01\": \"00\",\n      \"acknowledgment_type_02\": $lookupTable($tables.orderAckStatus, \"Key\", $$.orderAcknowledgementDetails.acknowledgementStatus).Value,\n      \"purchase_order_number_03\": $$.orderAcknowledgementDetails.orderNumber,\n      \"date_04\": $convertDateTime($$.orderAcknowledgementDetails.orderDate, $dateTime.$dateTime.RFC3339, \"yyyy-MM-dd\"),\n      \"date_09\": $convertDateTime($$.orderAcknowledgementDetails.orderAckDate, $dateTime.$dateTime.RFC3339, \"yyyy-MM-dd\")\n    },\n    \"reference_information_REF\": [\n      { \"reference_identification_qualifier_01\": \"CO\", \"reference_identification_02\": $$.orderAcknowledgementDetails.internalOrderNumber }\n    ],\n    \"party_identification_N1_loop_selling_party\": [$$.seller]\n      .{\n        \"party_identification_N1\": {\n          \"entity_identifier_code_01\": \"SE\",\n          \"name_02\": $.name,\n          \"identification_code_qualifier_03\": \"92\",\n          \"identification_code_04\": \"DROPSHIP CUSTOMER\"\n        },\n        \"party_location_N3\": [{ \"address_information_01\": $.address.street1 }],\n        \"geographic_location_N4\": {\n          \"city_name_01\": $.address.city,\n          \"state_or_province_code_02\": $.address.state,\n          \"postal_code_03\": $.address.zip,\n          \"country_code_04\": $.address.country\n        }\n      }[],\n    \"party_identification_N1_loop_ship_to\": [$$.shipTo]\n      .{\n        \"party_identification_N1\": {\n          \"entity_identifier_code_01\": \"ST\",\n          \"name_02\": $.name,\n          \"identification_code_qualifier_03\": \"92\",\n          \"identification_code_04\": \"DROPSHIP CUSTOMER\"\n        },\n        \"party_location_N3\": [{ \"address_information_01\": $.address.street1 }],\n        \"geographic_location_N4\": {\n          \"city_name_01\": $.address.city,\n          \"state_or_province_code_02\": $.address.state,\n          \"postal_code_03\": $.address.zip,\n          \"country_code_04\": $.address.country\n        }\n      }[]\n  },\n  \"detail\": {\n    \"baseline_item_data_PO1_loop\": $$\n      .items\n      .{\n        \"baseline_item_data_PO1\": {\n          \"assigned_identification_01\": $.id,\n          \"quantity_02\": $.quantity,\n          \"unit_or_basis_for_measurement_code_03\": \"EA\",\n          \"unit_price_04\": $.price,\n          \"product_service_id_qualifier_06\": \"VC\",\n          \"product_service_id_07\": $.vendorPartNumber,\n          \"product_service_id_qualifier_08\": \"SK\",\n          \"product_service_id_09\": $.sku\n        },\n        \"product_item_description_PID_loop\": [\n          {\n            \"product_item_description_PID\": { \"item_description_type_01\": \"F\", \"description_05\": $.description }\n          }\n        ],\n        \"line_item_acknowledgment_ACK_loop\": [\n          {\n            \"line_item_acknowledgment_ACK\": {\n              \"line_item_status_code_01\": $lookupTable($tables.itemAckStatus, \"Key\", $.status).Value,\n              \"quantity_02\": $.quantity,\n              \"unit_or_basis_for_measurement_code_03\": \"EA\"\n            }\n          }\n        ]\n      }[]\n  },\n  \"summary\": {\n    \"transaction_totals_CTT_loop\": [\n      {\n        \"transaction_totals_CTT\": { \"number_of_line_items_01\": $count($.items) }\n      }\n    ]\n  }\n}",
  "source": {
    "content": "{\"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\"type\":\"object\",\"properties\":{\"controlNumber\":{\"type\":\"string\"},\"orderAcknowledgementDetails\":{\"type\":\"object\",\"properties\":{\"internalOrderNumber\":{\"type\":\"string\"},\"orderNumber\":{\"type\":\"string\"},\"orderDate\":{\"type\":\"string\"},\"orderAckDate\":{\"type\":\"string\"},\"acknowledgementStatus\":{\"type\":\"string\"}}},\"seller\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"address\":{\"type\":\"object\",\"properties\":{\"street1\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"zip\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"}}}}},\"shipTo\":{\"type\":\"object\",\"properties\":{\"customerId\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"address\":{\"type\":\"object\",\"properties\":{\"street1\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"zip\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"}}}}},\"items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"number\"},\"unitCode\":{\"type\":\"string\"},\"price\":{\"type\":\"number\"},\"vendorPartNumber\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}}},\"default\":{\"controlNumber\":\"000012345\",\"orderAcknowledgementDetails\":{\"internalOrderNumber\":\"ACME-4567\",\"orderNumber\":\"365465413\",\"orderDate\":\"2022-08-30T14:22:22Z\",\"orderAckDate\":\"2022-08-31T14:22:22Z\",\"acknowledgementStatus\":\"ack-with-detail\"},\"seller\":{\"name\":\"Marvin Acme\",\"address\":{\"street1\":\"123 Main Street\",\"city\":\"Fairfield\",\"state\":\"NJ\",\"zip\":\"07004\",\"country\":\"US\"}},\"shipTo\":{\"customerId\":\"123\",\"name\":\"Wile E Coyote\",\"address\":{\"street1\":\"111 Canyon Court\",\"city\":\"Phoenix\",\"state\":\"AZ\",\"zip\":\"85001\",\"country\":\"US\"}},\"items\":[{\"id\":\"item-1\",\"quantity\":8,\"unitCode\":\"EA\",\"price\":400,\"vendorPartNumber\":\"VND1234567\",\"sku\":\"ACM/8900-400\",\"description\":\"400 pound anvil\",\"status\":\"Accepted\"},{\"id\":\"item-2\",\"quantity\":4,\"unitCode\":\"EA\",\"price\":125,\"vendorPartNumber\":\"VND000111222\",\"sku\":\"ACM/1100-001\",\"description\":\"Detonator\",\"status\":\"Accepted\"}]}}",
    "type": "jsonschema@2020-12",
    "name": "source document"
  },
  "target": {
    "content": "{\"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\"properties\":{\"heading\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_header_ST\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_identifier_code_01\":{\"type\":\"string\",\"default\":\"855\",\"enum\":[\"855\"],\"x12-codes\":{\"855\":{\"code\":\"855\"}}},\"transaction_set_control_number_02\":{\"type\":\"string\",\"minLength\":4,\"maxLength\":9}},\"required\":[\"transaction_set_identifier_code_01\",\"transaction_set_control_number_02\"]},\"beginning_segment_for_purchase_order_acknowledgment_BAK\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_purpose_code_01\":{\"type\":\"string\",\"x12-codes\":{\"00\":{\"description\":\"Original\",\"code\":\"00\"}},\"enum\":[\"00\"]},\"acknowledgment_type_02\":{\"type\":\"string\",\"x12-codes\":{\"AC\":{\"description\":\"Acknowledge - With Detail and Change\",\"code\":\"AC\"},\"AD\":{\"description\":\"Acknowledge - With Detail, No Change\",\"code\":\"AD\"},\"AE\":{\"description\":\"Acknowledge - With Exception Detail Only\",\"code\":\"AE\"},\"AH\":{\"description\":\"Acknowledge - Hold Status\",\"code\":\"AH\"},\"AK\":{\"description\":\"Acknowledge - No Detail or Change\",\"code\":\"AK\"},\"AP\":{\"description\":\"Acknowledge - Product Replenishment\",\"code\":\"AP\"},\"ZZ\":{\"description\":\"Mutually Defined\",\"code\":\"ZZ\"}},\"enum\":[\"AC\",\"AD\",\"AE\",\"AH\",\"AK\",\"AP\",\"ZZ\"]},\"purchase_order_number_03\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":22},\"date_04\":{\"type\":\"string\",\"format\":\"date\",\"x12-format\":\"CCYYMMDD\"},\"date_09\":{\"type\":\"string\",\"format\":\"date\",\"x12-format\":\"CCYYMMDD\"}},\"required\":[\"transaction_set_purpose_code_01\",\"acknowledgment_type_02\",\"purchase_order_number_03\",\"date_04\",\"date_09\"],\"description\":\"To indicate the beginning of the Purchase Order Acknowledgment Transaction Set and transmit identifying numbers and dates\\n\\nBAK04 is the date assigned by the purchaser to the purchase order 2 BAK09 is the date assigned by the sender to the acknowledgment\"},\"reference_information_REF\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"reference_identification_qualifier_01\":{\"type\":\"string\",\"x12-codes\":{\"CO\":{\"description\":\"Customer Order Number\",\"code\":\"CO\"}},\"enum\":[\"CO\"]},\"reference_identification_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":50}},\"required\":[\"reference_identification_qualifier_01\",\"reference_identification_02\"]},\"minItems\":1},\"party_identification_N1_loop_selling_party\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"party_identification_N1\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"entity_identifier_code_01\":{\"type\":\"string\",\"x12-codes\":{\"SE\":{\"description\":\"Selling Party\",\"code\":\"SE\"}},\"enum\":[\"SE\"]},\"name_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":60},\"identification_code_qualifier_03\":{\"type\":\"string\",\"x12-codes\":{\"92\":{\"description\":\"Assigned by Buyer or Buyer's Agent\",\"code\":\"92\"}},\"enum\":[\"92\"]},\"identification_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":80,\"examples\":[\"DROPSHIP CUSTOMER\"],\"description\":\"Code identifying a party or other code\\n\\n- This segment, used alone, provides the most efficient method of providing organizational identification. To obtain this efficiency the \\\"ID Code\\\" (N104) must provide a key to the table maintained by the transaction processing party.\\n\\nFor Acme this is DROPSHIP CUSTOMER\"}},\"required\":[\"entity_identifier_code_01\"],\"allOf\":[{\"x12-condition\":\"R0203\",\"anyOf\":[{\"required\":[\"name_02\"],\"type\":\"object\",\"properties\":{\"name_02\":true}},{\"required\":[\"identification_code_qualifier_03\"],\"type\":\"object\",\"properties\":{\"identification_code_qualifier_03\":true}}]},{\"x12-condition\":\"P0304\",\"type\":\"object\",\"dependentRequired\":{\"identification_code_qualifier_03\":[\"identification_code_04\"],\"identification_code_04\":[\"identification_code_qualifier_03\"]}}]},\"party_location_N3\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"address_information_01\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":55}},\"required\":[\"address_information_01\"]},\"minItems\":1,\"maxItems\":2},\"geographic_location_N4\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"city_name_01\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":30},\"state_or_province_code_02\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":2},\"postal_code_03\":{\"type\":\"string\",\"minLength\":3,\"maxLength\":15},\"country_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":3}},\"description\":\"To specify the geographic place of the named party\\n\\n- A combination of N401 through N403 may be adequate to specify location\\n- N402 is required only if the city name (N401) is in the U.S. or Canada\"}},\"required\":[\"party_identification_N1\"],\"title\":\"N1 Loop - Selling Party\"}},\"party_identification_N1_loop_ship_to\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"party_identification_N1\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"entity_identifier_code_01\":{\"type\":\"string\",\"x12-codes\":{\"ST\":{\"description\":\"Ship To\",\"code\":\"ST\"}},\"enum\":[\"ST\"]},\"name_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":60},\"identification_code_qualifier_03\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":2},\"identification_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":80,\"description\":\"Code identifying a party or other code\\n\\n- This segment, used alone, provides the most efficient method of providing organizational identification. To obtain this efficiency the \\\"ID Code\\\" (N104) must provide a key to the table maintained by the transaction processing party.\\n-For Acme this is DROPSHIP CUSTOMER\",\"examples\":[\"DROPSHIP CUSTOMER\"]}},\"required\":[\"entity_identifier_code_01\"],\"allOf\":[{\"x12-condition\":\"P0304\",\"type\":\"object\",\"dependentRequired\":{\"identification_code_qualifier_03\":[\"identification_code_04\"],\"identification_code_04\":[\"identification_code_qualifier_03\"]}},{\"x12-condition\":\"R0203\",\"anyOf\":[{\"required\":[\"name_02\"],\"type\":\"object\",\"properties\":{\"name_02\":true}},{\"required\":[\"identification_code_qualifier_03\"],\"type\":\"object\",\"properties\":{\"identification_code_qualifier_03\":true}}]}]},\"party_location_N3\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"address_information_01\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":55}},\"required\":[\"address_information_01\"]},\"minItems\":1,\"maxItems\":2},\"geographic_location_N4\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"city_name_01\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":30},\"state_or_province_code_02\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":2},\"postal_code_03\":{\"type\":\"string\",\"minLength\":3,\"maxLength\":15},\"country_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":3}}}},\"required\":[\"party_identification_N1\"],\"title\":\"N1 Loop - Ship To\"}}},\"required\":[\"beginning_segment_for_purchase_order_acknowledgment_BAK\",\"party_identification_N1_loop_selling_party\",\"party_identification_N1_loop_ship_to\"]},\"detail\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"baseline_item_data_PO1_loop\":{\"maxItems\":100000,\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"baseline_item_data_PO1\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"assigned_identification_01\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":20},\"quantity_02\":{\"type\":\"number\",\"minimum\":-999999999999999,\"maximum\":999999999999999},\"unit_or_basis_for_measurement_code_03\":{\"type\":\"string\",\"x12-codes\":{\"EA\":{\"description\":\"Each\",\"code\":\"EA\"}},\"enum\":[\"EA\"]},\"unit_price_04\":{\"type\":\"number\",\"minimum\":-999999999999999,\"maximum\":999999999999999},\"product_service_id_qualifier_06\":{\"type\":\"string\",\"x12-codes\":{\"VC\":{\"description\":\"Vendor's (Seller's) Catalog Number\",\"code\":\"VC\"}},\"enum\":[\"VC\"]},\"product_service_id_07\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":48},\"product_service_id_qualifier_08\":{\"type\":\"string\",\"x12-codes\":{\"SK\":{\"description\":\"Stock Keeping Unit (SKU)\",\"code\":\"SK\"}},\"enum\":[\"SK\"]},\"product_service_id_09\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":48},\"product_service_id_qualifier_10\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":2},\"product_service_id_11\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":48}},\"required\":[\"quantity_02\"],\"allOf\":[{\"type\":\"object\",\"x12-condition\":\"C0302\",\"dependentRequired\":{\"unit_or_basis_for_measurement_code_03\":[\"quantity_02\"]}},{\"x12-condition\":\"P0607\",\"type\":\"object\",\"dependentRequired\":{\"product_service_id_qualifier_06\":[\"product_service_id_07\"],\"product_service_id_07\":[\"product_service_id_qualifier_06\"]}},{\"x12-condition\":\"P0809\",\"type\":\"object\",\"dependentRequired\":{\"product_service_id_qualifier_08\":[\"product_service_id_09\"],\"product_service_id_09\":[\"product_service_id_qualifier_08\"]}},{\"x12-condition\":\"P1011\",\"type\":\"object\",\"dependentRequired\":{\"product_service_id_qualifier_10\":[\"product_service_id_11\"],\"product_service_id_11\":[\"product_service_id_qualifier_10\"]}}]},\"product_item_description_PID_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"product_item_description_PID\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"item_description_type_01\":{\"type\":\"string\",\"x12-codes\":{\"F\":{\"description\":\"Free-form\",\"code\":\"F\"}},\"enum\":[\"F\"]},\"description_05\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":80,\"examples\":[\"58313 â€“ PRODUCT NAME\"]}},\"required\":[\"item_description_type_01\",\"description_05\"]}},\"required\":[\"product_item_description_PID\"]}},\"line_item_acknowledgment_ACK_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"line_item_acknowledgment_ACK\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"line_item_status_code_01\":{\"type\":\"string\",\"x12-codes\":{\"IA\":{\"description\":\"Item Accepted\",\"code\":\"IA\"},\"IB\":{\"description\":\"Item Backordered\",\"code\":\"IB\"},\"IR\":{\"description\":\"Item Rejected\",\"code\":\"IR\"}},\"enum\":[\"IA\",\"IB\",\"IR\"]},\"quantity_02\":{\"type\":\"number\",\"minimum\":-999999999999999,\"maximum\":999999999999999},\"unit_or_basis_for_measurement_code_03\":{\"type\":\"string\",\"x12-codes\":{\"EA\":{\"description\":\"Each\",\"code\":\"EA\"}},\"enum\":[\"EA\"]}},\"required\":[\"line_item_status_code_01\"],\"allOf\":[{\"x12-condition\":\"P0203\",\"type\":\"object\",\"dependentRequired\":{\"quantity_02\":[\"unit_or_basis_for_measurement_code_03\"],\"unit_or_basis_for_measurement_code_03\":[\"quantity_02\"]}}]}},\"required\":[\"line_item_acknowledgment_ACK\"]}}},\"required\":[\"baseline_item_data_PO1\",\"product_item_description_PID_loop\",\"line_item_acknowledgment_ACK_loop\"]}}},\"required\":[\"baseline_item_data_PO1_loop\"]},\"summary\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_totals_CTT_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_totals_CTT\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"number_of_line_items_01\":{\"type\":\"integer\",\"minimum\":-999999,\"maximum\":999999,\"examples\":[]}},\"required\":[\"number_of_line_items_01\"]}},\"required\":[\"transaction_totals_CTT\"]}},\"transaction_set_trailer_SE\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"number_of_included_segments_01\":{\"type\":\"integer\",\"minimum\":-9999999999,\"maximum\":9999999999},\"transaction_set_control_number_02\":{\"type\":\"string\",\"minLength\":4,\"maxLength\":9}},\"required\":[\"number_of_included_segments_01\",\"transaction_set_control_number_02\"]}},\"required\":[]}},\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"heading\",\"detail\"]}",
    "type": "jsonschema@2020-12",
    "name": "target document"
  },
  "lookupTables": [
    {
      "name": "orderAckStatus",
      "values": [
        {
          "Key": "ack-with-detail",
          "Value": "AD"
        },
        {
          "Key": "ack-with-detail-change",
          "Value": "AC"
        },
        {
          "Key": "ack-no-detail",
          "Value": "AK"
        },
        {
          "Key": "ack-prod-replacement",
          "Value": "AP"
        }
      ]
    },
    {
      "name": "itemAckStatus",
      "values": [
        {
          "Key": "Accepted",
          "Value": "IA"
        },
        {
          "Key": "Rejected",
          "Value": "IR"
        },
        {
          "Key": "Backordered",
          "Value": "IB"
        }
      ]
    }
  ]
}